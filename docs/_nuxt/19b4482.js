(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{430:function(e,o,t){"use strict";t(4),t(8),t(84),t(12),t(45);var r=t(10),c=t(0),n=t(431),l=t.n(n);o.a={data:function(){return{operacoes:[]}},methods:{calculos:function(e){var o={};return(e=l.a.orderBy(e,["data_negociacao"],["asc"])).forEach((function(e){o[e.codigo]||(o[e.codigo]={portifolio:{quantidade:0,preco:0,lucro_prejuizo:0},operacoes:Object(c.a)({},e.key,{}),ultima_data_negocio:null}),o[e.codigo].operacoes[e.key]=function(e,o,t){var r="Comum",c=0;return e=new Date(e).getTime(),new Date(t.data_negocio).getTime()==e?0==o.quantidade?(r="Comum",c="C"==t.compra_venda?0:t.valor_total):o.quantidade>0&&"C"==t.compra_venda?(r="Comum",c=0):o.quantidade>0&&"V"==t.compra_venda?(r="Day-Trade",c=t.valor_total-o.preco*t.quantidade,o.quantidade<t.quantidade&&(c=t.valor_total-o.quantidade*o.preco)):o.quantidade<0&&"V"==t.compra_venda?(r="Comum",c=t.valor_total):o.quantidade<0&&"C"==t.compra_venda&&(r="Day-Trade",c=o.preco*t.quantidade-t.valor_total,Math.abs(o.quantidade)<t.quantidade&&(c=Math.abs(o.quantidade)*(o.preco-t.preco))):(r="Comum",0==o.quantidade?c="C"==t.compra_venda?0:t.valor_total:o.quantidade>0&&"C"==t.compra_venda?c=0:o.quantidade>0&&"V"==t.compra_venda?(c=t.valor_total-o.preco*t.quantidade,o.quantidade<t.quantidade&&(c=t.valor_total-o.quantidade*o.preco)):o.quantidade<0&&"V"==t.compra_venda?c=t.valor_total:o.quantidade<0&&"C"==t.compra_venda&&(c=o.preco*t.quantidade-t.valor_total,Math.abs(o.quantidade)<t.quantidade&&(c=o.quantidade*(o.preco-t.preco)))),{operacao:r,lucro_prejuizo:0!=c?c:0}}(o[e.codigo].ultima_data_negocio,o[e.codigo].portifolio,e),o[e.codigo].portifolio=function(e,o){var t,r,c;return 0==e.quantidade?("C"==o.compra_venda?(t=o.quantidade,c=0):(t=o.quantidade?-o.quantidade:0,c=o.quantidade*o.preco),r=o.preco):e.quantidade>0&&"V"==o.compra_venda?(t=e.quantidade-o.quantidade,r=e.preco,t||(r=0),c=e.lucro_prejuizo+o.preco*o.quantidade-e.preco*o.quantidade,t<0&&(r=o.preco,c=e.lucro_prejuizo+o.preco*o.quantidade-e.preco*e.quantidade)):e.quantidade>0&&"C"==o.compra_venda?(t=e.quantidade+o.quantidade,r=(e.preco*e.quantidade+o.preco*o.quantidade)/(e.quantidade+o.quantidade),c=e.lucro_prejuizo):e.quantidade<0&&"V"==o.compra_venda?(t=e.quantidade-o.quantidade,r=(e.preco*-e.quantidade+o.preco*o.quantidade)/(-e.quantidade+o.quantidade),c=e.lucro_prejuizo+o.quantidade*o.preco):e.quantidade<0&&"C"==o.compra_venda&&(t=e.quantidade+o.quantidade,r=e.preco,t||(r=0),c=e.lucro_prejuizo-o.preco*o.quantidade,t>0&&(c=0)),{quantidade:t,preco:r,lucro_prejuizo:c}}(o[e.codigo].portifolio,e),o[e.codigo].ultima_data_negocio=e.data_negocio})),o},fnPortifolio:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$db.operacoes.getAll();case 2:t=o.sent,r=e.calculos(t),r=Object.keys(r).map((function(e){var o=r[e].portifolio,t={codigo:e,valor_total:o.quantidade*o.preco};return Object.assign(t,r[e].portifolio)})).filter((function(p){return p.quantidade})),e.portifolio=r;case 6:case"end":return o.stop()}}),o)})))()}}}},433:function(e,o,t){"use strict";t.r(o);t(4),t(8),t(335),t(12),t(45);var r=t(10),c=t(0),n=t(1),l=t.n(n);function d(object,e){var o=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),o.push.apply(o,t)}return o}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(o){Object(c.a)(e,o,source[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(source,o))}))}return e}var f={mixins:[t(430).a],data:function(){return{operacoes:{fields:[{key:"key",label:"ID"},{key:"data_negocio",label:"Data",class:"text-center",sortable:!0},{key:"compra_venda",label:"C/V",class:"text-center",sortable:!0},{key:"mercado",label:"Mercado",sortable:!0},{key:"prazo",label:"Prazo",class:"text-center",sortable:!0},{key:"codigo",label:"Código",sortable:!0},{key:"especificacao_do_ativo",label:"Especificação",sortable:!0},{key:"quantidade",label:"Qtd",class:"text-center",sortable:!0},{key:"preco",label:"Preço",class:"text-center",sortable:!0},{key:"valor_total",label:"Total",class:"text-center",sortable:!0},{key:"lucro_prejuizo",label:"Lucro/Prejuízo",class:"text-center",sortable:!0},{key:"actions",label:"Ações",class:"text-center"}],items:[]},operacao:{key:null,data_negocio:l()(),compra_venda:"C",mercado:"",prazo:"",codigo:"",especificacao_do_ativo:"",quantidade:0,preco:0,valor_total:0},mercado:["Mercado a Vista","Merc. Fracionário","Opção de Venda","Opção de Compra"],filter:null,filterOn:[],data_inicial:null,data_final:null,infocei:null}},computed:{"operacao.valor_total":function(){return m(m({},this.operacao),{},{valor_total:this.operacao.quantidade*this.operacao.preco})},resultados:function(){var e={comum:0,day_trade:0};return this.operacoes.items.forEach((function(o){"Comum"==o.operacao?e.comum+=o.lucro_prejuizo:e.day_trade+=o.lucro_prejuizo})),e}},methods:{addCalculos:function(e){var o=this.calculos(e);return e.map((function(e){return e.operacao=o[e.codigo].operacoes[e.key].operacao,e.lucro_prejuizo=o[e.codigo].operacoes[e.key].lucro_prejuizo,e}))},uploadInfoCEI:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var t,i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$xlsx.cei_json(e.infocei);case 2:for(i in t=o.sent)e.$db.operacoes.add(t[i]);e.setItems();case 5:case"end":return o.stop()}}),o)})))()},putOperacao:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if((t=m({},e.operacao)).preco=Number(t.preco),t.quantidade=Number(t.quantidade),!t.key){o.next=10;break}return r=t.key,delete t.key,o.next=8,e.$db.operacoes.put(t,r);case 8:o.next=13;break;case 10:return delete t.key,o.next=13,e.$db.operacoes.put(t);case 13:e.setItems();case 14:case"end":return o.stop()}}),o)})))()},removeOperacao:function(e){var o=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.$db.operacoes.remove(e.key);case 2:o.setItems();case 3:case"end":return t.stop()}}),t)})))()},emptyOperacao:function(){this.operacao={key:null,data_negocio:l()(),compra_venda:"C",mercado:"",prazo:"",codigo:"",especificacao_do_ativo:"",quantidade:0,preco:0,valor_total:0}},openOperacao:function(e){(e=m({},e))&&e.key?(delete e.operacao,delete e.lucro_prejuizo,this.operacao=e):this.emptyOperacao(),this.$bvModal.show("operacao")},copyOperacao:function(e){delete(e=m({},e)).key,this.operacao=e,this.$bvModal.show("operacao")},filterByDate:function(e){var o=this.data_inicial?this.data_inicial:"1900-01-01",t=this.data_final?this.data_final:void 0;return e.filter((function(e){return l()(e.data_negocio).isBetween(o,t,void 0,"[]")}))},setItems:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var t;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$db.operacoes.getAll();case 2:t=o.sent,t=e.addCalculos(t),t=e.filterByDate(t),t=_.orderBy(t,["data_negocio","key"],["desc","desc"]),e.operacoes.items=t;case 7:case"end":return o.stop()}}),o)})))()}},watch:{data_inicial:function(){this.setItems()},data_final:function(){this.setItems()}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.setItems();case 1:case"end":return o.stop()}}),o)})))()}},v=t(50),component=Object(v.a)(f,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("b-container",{attrs:{fluid:""}},[t("b-modal",{attrs:{id:"uploadInfoCEI",title:"Upload InfoCEI"},on:{ok:function(o){return e.uploadInfoCEI()}}},[t("b-row",[t("b-col",[t("b-form-file",{attrs:{state:Boolean(e.infocei),placeholder:"Selecione seu arquivo InfoCEI.xls","drop-placeholder":"Arraste o arquivo aqui..."},model:{value:e.infocei,callback:function(o){e.infocei=o},expression:"infocei"}})],1)],1)],1),e._v(" "),t("b-modal",{attrs:{id:"operacao",title:"Operação"},on:{ok:e.putOperacao}},[t("div",{staticClass:"my-4"},[t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"data_negocio"}},[e._v("Data Negócio")])]),e._v(" "),t("b-col",[t("b-form-datepicker",{attrs:{id:"data_negocio",locale:"pt","date-format-options":{year:"numeric",month:"2-digit",day:"2-digit"},"reset-button":""},model:{value:e.operacao.data_negocio,callback:function(o){e.$set(e.operacao,"data_negocio",o)},expression:"operacao.data_negocio"}})],1)],1),e._v(" "),t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"compra_venda"}},[e._v("Compra / Venda")])]),e._v(" "),t("b-col",[t("b-form-group",[t("b-form-radio-group",{attrs:{id:"compra_venda","aria-describedby":"Compra/Venda",name:"compra_venda"},model:{value:e.operacao.compra_venda,callback:function(o){e.$set(e.operacao,"compra_venda",o)},expression:"operacao.compra_venda"}},[t("b-form-radio",{attrs:{value:"C"}},[e._v("Compra")]),e._v(" "),t("b-form-radio",{attrs:{value:"V"}},[e._v("Venda")])],1)],1)],1)],1),e._v(" "),t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"mercado"}},[e._v("Mercado")])]),e._v(" "),t("b-col",[t("b-form-select",{attrs:{id:"mercado",options:e.mercado},model:{value:e.operacao.mercado,callback:function(o){e.$set(e.operacao,"mercado",o)},expression:"operacao.mercado"}})],1)],1)],1),e._v(" "),t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"prazo"}},[e._v("Prazo")])]),e._v(" "),t("b-col",[t("b-form-datepicker",{attrs:{id:"prazo",locale:"pt","date-format-options":{year:"numeric",month:"2-digit",day:"2-digit"},"reset-button":""},model:{value:e.operacao.prazo,callback:function(o){e.$set(e.operacao,"prazo",o)},expression:"operacao.prazo"}})],1)],1),e._v(" "),t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"codigo"}},[e._v("Código")])]),e._v(" "),t("b-col",[t("b-form-input",{attrs:{id:"codigo",type:"text",placeholder:"Ex.: ADBC11",required:""},model:{value:e.operacao.codigo,callback:function(o){e.$set(e.operacao,"codigo",o)},expression:"operacao.codigo"}})],1)],1),e._v(" "),t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"codigo"}},[e._v("Especificação")])]),e._v(" "),t("b-col",[t("b-form-input",{attrs:{id:"especificacao_do_ativo",type:"text",placeholder:"Ex.: ABCD11 ON NM",required:""},model:{value:e.operacao.especificacao_do_ativo,callback:function(o){e.$set(e.operacao,"especificacao_do_ativo",o)},expression:"operacao.especificacao_do_ativo"}})],1)],1),e._v(" "),t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"quantidade"}},[e._v("Quantidade")])]),e._v(" "),t("b-col",[t("b-form-input",{attrs:{id:"quantidade",type:"number",placeholder:"Ex.: ABCD11 ON NM",required:""},on:{input:function(o){e.operacao.valor_total=e.operacao.preco*e.operacao.quantidade}},model:{value:e.operacao.quantidade,callback:function(o){e.$set(e.operacao,"quantidade",o)},expression:"operacao.quantidade"}})],1)],1),e._v(" "),t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"preco"}},[e._v("Preço")])]),e._v(" "),t("b-col",[t("b-form-input",{attrs:{id:"preco",type:"number",placeholder:"Ex.: 5.8",required:""},on:{input:function(o){e.operacao.valor_total=e.operacao.preco*e.operacao.quantidade}},model:{value:e.operacao.preco,callback:function(o){e.$set(e.operacao,"preco",o)},expression:"operacao.preco"}})],1)],1),e._v(" "),t("b-row",{staticClass:"my-3"},[t("b-col",{staticClass:"text-right"},[t("label",{attrs:{for:"valor_total"}},[e._v("Valor Total")])]),e._v(" "),t("b-col",[t("b-form-input",{attrs:{id:"valor_total",type:"number",placeholder:"Ex.: 5.8",disabled:""},model:{value:e.operacao.valor_total,callback:function(o){e.$set(e.operacao,"valor_total",o)},expression:"operacao.valor_total"}})],1)],1)],1),e._v(" "),t("b-row",{staticClass:"my-4"},[t("b-col",[t("h3",[e._v("\n        Operações\n        "),t("b-button",{attrs:{size:"sm"},on:{click:function(o){return e.openOperacao()}}},[t("b-icon-plus")],1)],1)])],1),e._v(" "),t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("b-form-group",{attrs:{id:"data_inicial",label:"Data Inicial","label-for":"data_inicial"}},[t("b-form-datepicker",{attrs:{id:"data_inicial",locale:"pt","date-format-options":{year:"numeric",month:"2-digit",day:"2-digit"},placeholder:"","reset-button":""},model:{value:e.data_inicial,callback:function(o){e.data_inicial=o},expression:"data_inicial"}})],1)],1),e._v(" "),t("b-col",{attrs:{cols:"2"}},[t("b-form-group",{attrs:{id:"data_final",label:"Data Final","label-for":"data_final"}},[t("b-form-datepicker",{attrs:{id:"data_final",locale:"pt","date-format-options":{year:"numeric",month:"2-digit",day:"2-digit"},placeholder:"","reset-button":""},model:{value:e.data_final,callback:function(o){e.data_final=o},expression:"data_final"}})],1)],1),e._v(" "),t("b-col",{attrs:{cols:"3"}},[t("b-form-group",{attrs:{id:"pesquisa",label:"Pesquisa","label-for":"pesquisa"}},[t("b-form-input",{attrs:{id:"pesquisa",type:"search",placeholder:"Pesquisa"},model:{value:e.filter,callback:function(o){e.filter=o},expression:"filter"}})],1)],1),e._v(" "),t("b-col",[t("b-row",[t("b-col",[t("p",[e._v("Resultados")])])],1),e._v(" "),t("b-row",[t("b-col",{staticClass:"text-right"},[t("p",[e._v("\n            "+e._s(e._f("currency")(e.resultados.comum))+"\n            "),t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Comum"}},[e._v("C")])],1)]),e._v(" "),t("b-col",{staticClass:"text-right"},[t("p",[e._v("\n            "+e._s(e._f("currency")(e.resultados.day_trade))+"\n            "),t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Day-Trade"}},[e._v("D")])],1)])],1)],1),e._v(" "),t("b-col",{staticClass:"text-right"},[t("b-form-group",{attrs:{label:"."}},[t("b-button-group",[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.uploadInfoCEI",modifiers:{uploadInfoCEI:!0}}]},[t("b-icon-upload"),e._v("\n            CEI\n          ")],1)],1)],1)],1)],1),e._v(" "),t("b-row",{staticClass:"my-4"},[t("b-col",[t("b-table",{attrs:{fields:e.operacoes.fields,items:e.operacoes.items,filter:e.filter,"filter-included-fields":e.filterOn,"filter-debounce":400,"head-variant":"light",responsive:"sm",small:"",hover:"","show-empty":""},scopedSlots:e._u([{key:"cell(data_negocio)",fn:function(data){return[e._v("\n          "+e._s(e._f("momentFormat")(data.value,"DD/MM/YYYY"))+"\n        ")]}},{key:"cell(prazo)",fn:function(data){return[e._v("\n          "+e._s(e._f("momentFormat")(data.value,"DD/MM/YYYY"))+"\n        ")]}},{key:"cell(preco)",fn:function(data){return[t("p",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("currency")(data.value))+"\n          ")])]}},{key:"cell(valor_total)",fn:function(data){return[t("p",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("currency")(data.value))+"\n          ")])]}},{key:"cell(lucro_prejuizo)",fn:function(data){return[t("p",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("currency")(data.value))+"\n            "),"Day-Trade"==data.item.operacao?t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Day-Trade"}},[e._v("D")]):t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Comum"}},[e._v("C")])],1)]}},{key:"cell(actions)",fn:function(o){return[t("b-button-group",[t("b-button",{attrs:{size:"sm"},on:{click:function(t){return e.openOperacao(o.item)}}},[t("b-icon-pencil")],1),e._v(" "),t("b-button",{attrs:{size:"sm"},on:{click:function(t){return e.copyOperacao(o.item)}}},[t("b-icon-files")],1),e._v(" "),t("b-button",{attrs:{size:"sm"},on:{click:function(t){return e.removeOperacao(o.item)}}},[t("b-icon-trash")],1)],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);o.default=component.exports}}]);